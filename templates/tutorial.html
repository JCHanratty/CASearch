{% extends "layout.html" %}

{% block content %}
<div class="space-y-10">

    <!-- Header -->
    <div class="border-b border-surface-200 pb-6">
        <div class="flex items-center gap-3 mb-2">
            <i data-lucide="book-open" class="w-5 h-5 text-copper-600"></i>
            <p class="text-sm font-sans font-medium text-copper-600 tracking-wide uppercase">User Guide</p>
        </div>
        <h1 class="font-serif text-3xl text-surface-900">How to Use This Dashboard</h1>
        <p class="mt-2 font-sans text-surface-500 text-sm">A quick guide for union executives and representatives</p>
    </div>

    <!-- Quick Start Guide -->
    <div>
        <h2 class="font-serif text-xl text-surface-800 mb-6">Quick Start Guide</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- Step 1 -->
            <div class="bg-surface-0 border border-surface-200 rounded-lg p-5">
                <div class="flex items-center gap-3 mb-4">
                    <span class="flex items-center justify-center h-8 w-8 rounded-full bg-copper-600 text-white font-sans font-semibold text-sm">1</span>
                    <h3 class="font-serif text-lg text-surface-800">Index Your Contracts</h3>
                </div>
                <div class="flex items-start gap-2 mb-3">
                    <i data-lucide="database" class="w-4 h-4 text-copper-500 mt-0.5 flex-shrink-0"></i>
                    <p class="font-sans text-sm text-surface-600 leading-relaxed">Go to <a href="/documents" class="text-copper-600 hover:text-copper-700 font-medium underline underline-offset-2">Documents</a> and click "Scan & Index" to add your collective agreement PDFs. The system will extract and index all text for searching.</p>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="bg-surface-0 border border-surface-200 rounded-lg p-5">
                <div class="flex items-center gap-3 mb-4">
                    <span class="flex items-center justify-center h-8 w-8 rounded-full bg-copper-600 text-white font-sans font-semibold text-sm">2</span>
                    <h3 class="font-serif text-lg text-surface-800">Ask Questions</h3>
                </div>
                <div class="flex items-start gap-2 mb-3">
                    <i data-lucide="message-circle-question" class="w-4 h-4 text-copper-500 mt-0.5 flex-shrink-0"></i>
                    <p class="font-sans text-sm text-surface-600 leading-relaxed">Go to <a href="/qa" class="text-copper-600 hover:text-copper-700 font-medium underline underline-offset-2">Q&A</a> and type your question in plain language. The AI will find relevant contract sections and provide answers with citations.</p>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="bg-surface-0 border border-surface-200 rounded-lg p-5">
                <div class="flex items-center gap-3 mb-4">
                    <span class="flex items-center justify-center h-8 w-8 rounded-full bg-copper-600 text-white font-sans font-semibold text-sm">3</span>
                    <h3 class="font-serif text-lg text-surface-800">Verify & Compare</h3>
                </div>
                <div class="flex items-start gap-2 mb-3">
                    <i data-lucide="check-circle" class="w-4 h-4 text-copper-500 mt-0.5 flex-shrink-0"></i>
                    <p class="font-sans text-sm text-surface-600 leading-relaxed">Click any citation to view the source page. Use <a href="/compare" class="text-copper-600 hover:text-copper-700 font-medium underline underline-offset-2">Compare</a> to see how different contracts handle the same topic side-by-side.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Common Questions -->
    <div class="bg-surface-0 border border-surface-200 rounded-lg p-6">
        <h2 class="font-serif text-xl text-surface-800 mb-1">Try These Common Questions</h2>
        <p class="font-sans text-sm text-surface-400 mb-5">Click any question to open it in the Q&A page. Replace [LocalName] with your actual local name for targeted results.</p>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-3">
            {% for prompt in SUGGESTED_PROMPTS() %}
            <button type="button"
                    onclick="usePrompt('{{ prompt | e }}')"
                    class="text-left px-4 py-3 rounded-lg border border-surface-200 hover:border-copper-400 hover:bg-copper-50 transition-all font-sans text-sm text-surface-700 flex items-start group">
                <i data-lucide="chevron-right" class="w-4 h-4 text-copper-500 mr-2 mt-0.5 flex-shrink-0 group-hover:translate-x-0.5 transition-transform"></i>
                <span>{{ prompt }}</span>
            </button>
            {% endfor %}
        </div>
    </div>

    <!-- Two Column: Search Tips & Q&A Tips -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

        <!-- Search Tips -->
        <div class="bg-surface-0 border border-surface-200 rounded-lg p-6">
            <h2 class="font-serif text-lg text-surface-800 mb-4 flex items-center gap-2">
                <i data-lucide="search" class="w-5 h-5 text-copper-600"></i>
                Search Tips
            </h2>
            <div class="space-y-4 font-sans text-sm">
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600">
                        <strong class="text-surface-800">Exact phrases:</strong> Use quotes for exact matches<br>
                        <code class="bg-surface-100 px-2 py-0.5 rounded text-xs text-surface-700">"sick leave"</code> finds that exact phrase
                    </div>
                </div>
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600">
                        <strong class="text-surface-800">Target a contract:</strong> Add the city/local name<br>
                        <code class="bg-surface-100 px-2 py-0.5 rounded text-xs text-surface-700">overtime for Edmonton</code>
                    </div>
                </div>
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600">
                        <strong class="text-surface-800">Synonym expansion:</strong> Toggle this on to also find related terms<br>
                        <span class="text-surface-400 text-xs">"vacation" will also find "PTO" and "annual leave"</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Q&A Tips -->
        <div class="bg-surface-0 border border-surface-200 rounded-lg p-6">
            <h2 class="font-serif text-lg text-surface-800 mb-4 flex items-center gap-2">
                <i data-lucide="lightbulb" class="w-5 h-5 text-copper-600"></i>
                Q&A Best Practices
            </h2>
            <div class="space-y-4 font-sans text-sm">
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600"><strong class="text-surface-800">Be specific:</strong> "What is the overtime rate for weekends?" is better than "tell me about overtime"</div>
                </div>
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600"><strong class="text-surface-800">Mention the contract:</strong> Add the local/city name to search specific documents</div>
                </div>
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600"><strong class="text-surface-800">Check citations:</strong> Always click the [Source] links to verify answers against the actual contract text</div>
                </div>
                <div class="flex items-start gap-2">
                    <span class="w-1 h-1 rounded-full bg-copper-500 mt-2 flex-shrink-0"></span>
                    <div class="text-surface-600"><strong class="text-surface-800">Break it down:</strong> For complex topics, ask several focused questions rather than one broad question</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Comparison -->
    <div class="bg-surface-0 border border-surface-200 rounded-lg p-6">
        <h2 class="font-serif text-lg text-surface-800 mb-3 flex items-center gap-2">
            <i data-lucide="columns-2" class="w-5 h-5 text-copper-600"></i>
            Comparing Contracts
        </h2>
        <p class="font-sans text-sm text-surface-500 mb-5">The Compare feature helps you see how different collective agreements handle the same topic. This is useful for:</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-surface-50 border border-surface-200 rounded-lg p-4">
                <h4 class="font-serif text-surface-800 text-base mb-1">Negotiation Prep</h4>
                <p class="font-sans text-xs text-surface-500">See what other locals have negotiated for similar provisions</p>
            </div>
            <div class="bg-surface-50 border border-surface-200 rounded-lg p-4">
                <h4 class="font-serif text-surface-800 text-base mb-1">Best Practices</h4>
                <p class="font-sans text-xs text-surface-500">Identify strong contract language to advocate for</p>
            </div>
            <div class="bg-surface-50 border border-surface-200 rounded-lg p-4">
                <h4 class="font-serif text-surface-800 text-base mb-1">Consistency Check</h4>
                <p class="font-sans text-xs text-surface-500">Ensure similar treatment across different locations</p>
            </div>
        </div>
    </div>

    <!-- Important Note -->
    <div class="bg-surface-50 border border-surface-200 rounded-lg p-5">
        <div class="flex items-start gap-3">
            <i data-lucide="info" class="w-5 h-5 text-surface-400 mt-0.5 flex-shrink-0"></i>
            <div class="font-sans text-sm text-surface-600 leading-relaxed">
                <strong class="text-surface-800">Important:</strong> This tool provides AI-assisted analysis to help you quickly find information in your collective agreements. Always verify answers by checking the cited source pages. The AI can make mistakes, so treat its responses as a starting point for research, not as legal advice.
            </div>
        </div>
    </div>

    <!-- CTA Button -->
    <div class="text-center pb-4">
        <a href="/qa"
           class="inline-flex items-center px-6 py-3 bg-copper-600 hover:bg-copper-700 text-white font-sans font-semibold text-base rounded-lg transition-colors">
            Start Asking Questions
            <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
        </a>
    </div>

</div>

<script>
function usePrompt(text) {
    // Store the prompt and navigate to Q&A
    sessionStorage.setItem('pendingPrompt', text);
    window.location.href = '/qa';
}

// Check for pending prompt on Q&A page load
document.addEventListener('DOMContentLoaded', function() {
    const pending = sessionStorage.getItem('pendingPrompt');
    const questionInput = document.getElementById('question');

    if (pending && questionInput) {
        sessionStorage.removeItem('pendingPrompt');
        questionInput.value = pending;
        questionInput.focus();
    }
});
</script>
{% endblock %}
