{% if query and results %}
<div class="space-y-4">
    <p class="text-sm font-sans text-surface-300">Found {{ results | length }} result(s) for "{{ query }}"</p>

    {% if expand_synonyms and synonyms_used %}
    <!-- Synonym expansion info -->
    <div class="bg-surface-900 border border-surface-700 rounded-lg p-4">
        <div class="flex items-start gap-3">
            <i data-lucide="zap" class="w-5 h-5 text-copper-600 mt-0.5 flex-shrink-0"></i>
            <div>
                <p class="text-sm font-sans font-medium text-surface-200">Also searched for:</p>
                <div class="mt-1 flex flex-wrap gap-2">
                    {% for term, synonyms in synonyms_used.items() %}
                    <span class="inline-flex items-center text-xs font-sans">
                        <span class="font-medium text-surface-300">"{{ term }}"</span>
                        <span class="mx-1 text-surface-400">&rarr;</span>
                        {% for syn in synonyms[:3] %}
                        <span class="px-2 py-0.5 bg-copper-600/10 text-copper-600 rounded-full mr-1">{{ syn }}</span>
                        {% endfor %}
                        {% if synonyms | length > 3 %}
                        <span class="text-surface-400">+{{ synonyms | length - 3 }} more</span>
                        {% endif %}
                    </span>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    {% for result in results %}
    <div class="bg-surface-800 border border-surface-700 rounded-lg p-6 hover:border-surface-600 transition-colors">
        <div class="flex items-start justify-between">
            <div class="flex-1">
                <h3 class="text-lg font-serif font-medium text-surface-100">
                    <a href="/documents/{{ result.file_id }}/view?page={{ result.page_number }}"
                       class="hover:text-copper-600 transition-colors flex items-center">
                        <i data-lucide="file-text" class="w-4 h-4 mr-2 text-copper-600 flex-shrink-0"></i>
                        {{ result.filename }}
                    </a>
                </h3>
                <p class="text-sm font-sans text-surface-400 ml-6">Page {{ result.page_number }}</p>
            </div>
            <span class="text-xs font-sans text-surface-400">Score: {{ "%.2f" | format(result.score) }}</span>
        </div>

        <div class="mt-4 font-sans text-surface-200 citation">
            {{ result.snippet | safe }}
        </div>

        <div class="mt-4">
            <a href="/documents/{{ result.file_id }}/view?page={{ result.page_number }}"
               class="text-sm font-sans text-copper-600 hover:text-copper-600/80 transition-colors inline-flex items-center">
                View in context
                <i data-lucide="arrow-right" class="w-3.5 h-3.5 ml-1"></i>
            </a>
        </div>
    </div>
    {% endfor %}
</div>

{% elif query and not results %}
<div class="bg-surface-800 border border-surface-700 rounded-lg p-12 text-center">
    <i data-lucide="search" class="w-12 h-12 text-surface-300 mx-auto"></i>
    <h3 class="mt-3 text-sm font-serif font-medium text-surface-100">No results found</h3>
    <p class="mt-1 text-sm font-sans text-surface-400">
        No documents contain "{{ query }}". Try different keywords.
    </p>
</div>

{% else %}
<div class="bg-surface-800 border border-surface-700 rounded-lg p-12 text-center">
    <i data-lucide="search" class="w-12 h-12 text-surface-300 mx-auto"></i>
    <h3 class="mt-3 text-sm font-serif font-medium text-surface-100">Search your contracts</h3>
    <p class="mt-1 text-sm font-sans text-surface-400">
        Enter a search term to find relevant clauses and language across all indexed agreements.
    </p>
</div>
{% endif %}