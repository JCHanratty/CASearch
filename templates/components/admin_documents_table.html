{% if indexed_count is defined %}
<div class="px-5 py-3 bg-green-900/10 border-b border-surface-700">
    <p class="text-xs text-green-400">
        Indexed {{ indexed_count }} document{{ 's' if indexed_count != 1 else '' }}{% if error_count %}, {{ error_count }} error(s){% endif %}
    </p>
</div>
{% endif %}

{% if documents %}
<div class="overflow-x-auto">
    <table class="w-full text-sm">
        <thead>
            <tr class="text-left text-xs text-surface-400 border-b border-surface-700">
                <th class="px-5 py-3 font-medium">Filename</th>
                <th class="px-5 py-3 font-medium">Status</th>
                <th class="px-5 py-3 font-medium">Pages</th>
                <th class="px-5 py-3 font-medium text-right">Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-surface-700">
            {% for doc in documents %}
            <tr id="admin-doc-{{ doc.id }}" class="hover:bg-surface-700/30 transition-colors">
                <td class="px-5 py-3">
                    <div class="flex items-center gap-2">
                        <i data-lucide="file-text" class="w-4 h-4 text-copper-400 flex-shrink-0"></i>
                        <span class="text-surface-200 truncate max-w-xs" title="{{ doc.filename }}">
                            {{ doc.short_name or doc.filename }}
                        </span>
                    </div>
                </td>
                <td class="px-5 py-3">
                    {% if doc.status == 'indexed' %}
                    <span class="inline-flex items-center gap-1 text-xs text-green-400">
                        <i data-lucide="check-circle" class="w-3.5 h-3.5"></i> Indexed
                    </span>
                    {% elif doc.status == 'pending' %}
                    <span class="inline-flex items-center gap-1 text-xs text-yellow-400">
                        <i data-lucide="clock" class="w-3.5 h-3.5"></i> Pending
                    </span>
                    {% elif doc.status == 'error' %}
                    <span class="inline-flex items-center gap-1 text-xs text-red-400">
                        <i data-lucide="alert-circle" class="w-3.5 h-3.5"></i> Error
                    </span>
                    {% else %}
                    <span class="text-xs text-surface-500">{{ doc.status }}</span>
                    {% endif %}
                </td>
                <td class="px-5 py-3 text-surface-400">{{ doc.pages or 'â€”' }}</td>
                <td class="px-5 py-3 text-right">
                    <div class="flex items-center justify-end gap-2">
                        {% if doc.status == 'pending' or doc.status == 'error' %}
                        <button hx-post="/documents/{{ doc.id }}/index"
                                hx-target="#admin-doc-{{ doc.id }}"
                                hx-swap="outerHTML"
                                class="text-xs text-copper-400 hover:text-copper-300 transition-colors">
                            Index
                        </button>
                        {% endif %}
                        <button hx-post="/admin/documents/{{ doc.id }}/delete"
                                hx-target="#admin-doc-{{ doc.id }}"
                                hx-swap="outerHTML"
                                hx-confirm="Delete {{ doc.filename }}? This cannot be undone."
                                class="text-xs text-red-400 hover:text-red-300 transition-colors">
                            Delete
                        </button>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="px-5 py-8 text-center">
    <i data-lucide="inbox" class="w-8 h-8 text-surface-600 mx-auto mb-2"></i>
    <p class="text-sm text-surface-400">No documents uploaded yet.</p>
</div>
{% endif %}
